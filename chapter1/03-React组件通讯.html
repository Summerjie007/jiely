<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件通讯 | react 快速上手</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="./images/favicon.ico">
    <meta name="description" content="杰哥哥前端研究院">
    
    <link rel="preload" href="/jiely/assets/css/0.styles.5afc0e25.css" as="style"><link rel="preload" href="/jiely/assets/js/app.87156db4.js" as="script"><link rel="preload" href="/jiely/assets/js/3.05e47443.js" as="script"><link rel="preload" href="/jiely/assets/js/10.1bb09252.js" as="script"><link rel="prefetch" href="/jiely/assets/js/11.7487ab28.js"><link rel="prefetch" href="/jiely/assets/js/12.a9e0b5c6.js"><link rel="prefetch" href="/jiely/assets/js/13.46042c4c.js"><link rel="prefetch" href="/jiely/assets/js/14.7e9485d0.js"><link rel="prefetch" href="/jiely/assets/js/15.82bd5665.js"><link rel="prefetch" href="/jiely/assets/js/16.da48c8d1.js"><link rel="prefetch" href="/jiely/assets/js/17.4c4fbca4.js"><link rel="prefetch" href="/jiely/assets/js/18.8f64b26e.js"><link rel="prefetch" href="/jiely/assets/js/19.6e619bb0.js"><link rel="prefetch" href="/jiely/assets/js/2.af879dde.js"><link rel="prefetch" href="/jiely/assets/js/20.a8659479.js"><link rel="prefetch" href="/jiely/assets/js/21.c50358c3.js"><link rel="prefetch" href="/jiely/assets/js/22.2b3cb2cc.js"><link rel="prefetch" href="/jiely/assets/js/23.ef2a71c6.js"><link rel="prefetch" href="/jiely/assets/js/24.713e58c4.js"><link rel="prefetch" href="/jiely/assets/js/25.9e2de17e.js"><link rel="prefetch" href="/jiely/assets/js/26.ebe2c2c7.js"><link rel="prefetch" href="/jiely/assets/js/27.b410c517.js"><link rel="prefetch" href="/jiely/assets/js/28.416e0f83.js"><link rel="prefetch" href="/jiely/assets/js/29.28bb402e.js"><link rel="prefetch" href="/jiely/assets/js/30.117590fb.js"><link rel="prefetch" href="/jiely/assets/js/31.012589f4.js"><link rel="prefetch" href="/jiely/assets/js/32.391074f7.js"><link rel="prefetch" href="/jiely/assets/js/33.3b5bff31.js"><link rel="prefetch" href="/jiely/assets/js/34.5f03808f.js"><link rel="prefetch" href="/jiely/assets/js/35.c836f09c.js"><link rel="prefetch" href="/jiely/assets/js/36.cdfd4095.js"><link rel="prefetch" href="/jiely/assets/js/37.3888e0de.js"><link rel="prefetch" href="/jiely/assets/js/38.9d42564b.js"><link rel="prefetch" href="/jiely/assets/js/39.af6cc2f1.js"><link rel="prefetch" href="/jiely/assets/js/4.cb17c8a3.js"><link rel="prefetch" href="/jiely/assets/js/40.28ea6c30.js"><link rel="prefetch" href="/jiely/assets/js/41.07ff3483.js"><link rel="prefetch" href="/jiely/assets/js/42.461144bb.js"><link rel="prefetch" href="/jiely/assets/js/43.7381291e.js"><link rel="prefetch" href="/jiely/assets/js/44.e99c69d5.js"><link rel="prefetch" href="/jiely/assets/js/45.82ace09a.js"><link rel="prefetch" href="/jiely/assets/js/46.6f99a05f.js"><link rel="prefetch" href="/jiely/assets/js/47.50c29aca.js"><link rel="prefetch" href="/jiely/assets/js/48.8de86252.js"><link rel="prefetch" href="/jiely/assets/js/49.7b800d70.js"><link rel="prefetch" href="/jiely/assets/js/5.8ae26c23.js"><link rel="prefetch" href="/jiely/assets/js/6.9b2d155f.js"><link rel="prefetch" href="/jiely/assets/js/7.276458e1.js"><link rel="prefetch" href="/jiely/assets/js/8.b230375e.js"><link rel="prefetch" href="/jiely/assets/js/9.fae1b1d4.js">
    <link rel="stylesheet" href="/jiely/assets/css/0.styles.5afc0e25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jiely/" class="home-link router-link-active"><img src="/jiely/images/logo.jpg" alt="react 快速上手" class="logo"> <span class="site-name can-hide">react 快速上手</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://juejin.cn/post/7097067108663558151" target="_blank" rel="noopener noreferrer" class="nav-link external">
  50+Vue经典面试题源码级
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://segmentfault.com/a/1190000018604138" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://juejin.cn/post/6844904055840440334" target="_blank" rel="noopener noreferrer" class="nav-link external">
  从零React项目
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://summerjie007.github.io/vue3_study/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3+TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://juejin.cn/post/7097067108663558151" target="_blank" rel="noopener noreferrer" class="nav-link external">
  50+Vue经典面试题源码级
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://segmentfault.com/a/1190000018604138" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://juejin.cn/post/6844904055840440334" target="_blank" rel="noopener noreferrer" class="nav-link external">
  从零React项目
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://summerjie007.github.io/vue3_study/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3+TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/jiely/00_课程介绍.html" class="sidebar-link">课程指南</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>一.react全家桶上手</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React组件基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>React组件通讯</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jiely/chapter1/03-React组件通讯.html" class="active sidebar-link">组件通讯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯" class="sidebar-link">组件通讯</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件拆分到文件" class="sidebar-link">组件拆分到文件</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#拓展-使用vscode的代码片段快速录入组件基本结构" class="sidebar-link">拓展：使用vscode的代码片段快速录入组件基本结构</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯介绍" class="sidebar-link">组件通讯介绍</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#props基本使用" class="sidebar-link">props基本使用</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#props的三个注意事项" class="sidebar-link">props的三个注意事项</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#props的children属性" class="sidebar-link">props的children属性</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯-父传子" class="sidebar-link">组件通讯-父传子</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯-父传子典型应用" class="sidebar-link">组件通讯-父传子典型应用</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯-子传父" class="sidebar-link">组件通讯-子传父</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯-子传父典型应用" class="sidebar-link">组件通讯-子传父典型应用</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯-兄弟组件" class="sidebar-link">组件通讯-兄弟组件</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#组件通讯-跨级组件通讯-难点" class="sidebar-link">组件通讯 -跨级组件通讯（难点）</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#综合案例-b站评论列表" class="sidebar-link">综合案例：B站评论列表</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#tab栏切换功能" class="sidebar-link">tab栏切换功能</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#评论列表展示-父传子" class="sidebar-link">评论列表展示-父传子</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#添加评论-子传父" class="sidebar-link">添加评论-子传父</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/03-React组件通讯.html#小结-2" class="sidebar-link">小结</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React组件通讯进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>react-hooks基础阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>react-hooks进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>redux基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>redux进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>react路由</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二.react全家桶项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>三.前端算法之道</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>四.JS设计设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>五.JS报错总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>六.Vue3+Pinia</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>七.node.js</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="组件通讯"><a href="#组件通讯" class="header-anchor">#</a> 组件通讯</h2> <ul><li>[ ] 组件通讯介绍以及为什么要有组件通讯</li> <li>[ ] 组件的props</li> <li>[ ] 组件通讯的三种方式 父传子  子传父  兄弟组件</li> <li>[ ] Context组件通讯</li> <li>[ ] 案例</li></ul> <h2 id="组件拆分到文件"><a href="#组件拆分到文件" class="header-anchor">#</a> 组件拆分到文件</h2> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <p>掌握将组件定义到单独的文件的基本方式。</p> <h3 id="格式"><a href="#格式" class="header-anchor">#</a> 格式</h3> <h4 id="定义-并默认导出组件"><a href="#定义-并默认导出组件" class="header-anchor">#</a> 定义，并默认导出组件</h4> <p>Com.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Com</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>$2<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="导入组件"><a href="#导入组件" class="header-anchor">#</a> 导入组件</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Com <span class="token keyword">from</span> <span class="token string">'./Com.js'</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Com<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Com<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="要点"><a href="#要点" class="header-anchor">#</a> 要点</h3> <p>组件名采用大驼峰命名法</p> <p>组件文件名与组件名一致</p> <h2 id="拓展-使用vscode的代码片段快速录入组件基本结构"><a href="#拓展-使用vscode的代码片段快速录入组件基本结构" class="header-anchor">#</a> 拓展：使用vscode的代码片段快速录入组件基本结构</h2> <p><img src="/jiely/assets/img/image-20211107114836043.0ece9d5a.png" alt="image-20211107114836043"></p> <h2 id="组件通讯介绍"><a href="#组件通讯介绍" class="header-anchor">#</a> 组件通讯介绍</h2> <h3 id="目标-2"><a href="#目标-2" class="header-anchor">#</a> 目标</h3> <p>了解组件通讯的意义，知道react组件通讯的三种方式</p> <h3 id="内容"><a href="#内容" class="header-anchor">#</a> 内容</h3> <ul><li><em>组件</em>是独立且封闭的单元，默认情况下，只能使用组件自己的数据。</li> <li>在组件化过程中，我们将一个完整的功能拆分成多个组件，以更好的完成整个应用的功能。</li> <li>而在这个过程中，多个组件之间不可避免的要共享某些数据</li> <li>为了实现这些功能，就需要<code>打破组件的独立封闭性</code>，让其与外界沟通。这个过程就是<strong>组件通讯</strong>。</li></ul> <h3 id="三种方式"><a href="#三种方式" class="header-anchor">#</a> 三种方式</h3> <ul><li>父子组件之间</li> <li>兄弟组件之间</li> <li>跨组件层级</li></ul> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>组件中的状态是私有的，也就是说，组件的状态只能在组件内部使用，无法直接在组件外使用。</p> <p>其与外界沟通。这个过程就是<strong>组件通讯</strong></p> <h2 id="props基本使用"><a href="#props基本使用" class="header-anchor">#</a> props基本使用</h2> <p><img src="/jiely/assets/img/image-20211107162059948.86dc7b2f.png" alt="image-20211107162059948"></p> <h3 id="目标-3"><a href="#目标-3" class="header-anchor">#</a> 目标</h3> <p>掌握props的使用语法，能将数据从父组件传给子组件</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApgAAAERCAYAAADfZtdEAAAcnElEQVR4nO3deVxVdeL/8fcFZNUCjQpBMRXDddwy00wrTdFqptxzX8ZyKddWt0rTaXWrxlLLRtxAXFJx+1a4L2iaNui4TQqlICqYC17v8vvD6f4kQVE/cgFfz8eDx8N7zuec87n8wePlOfecaznz+zmnAAAAAEM83D0BAAAAFC0EJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGCU161sfO7cOZ06dVKSxdB0AAAAkN+8vb11zz33yNPT08j+bjowd2xP1Nq1CXI6nUYmAgAAAPcpVaqU2rRtr+LFi9/yvm7qEvm5c+eISwAAgCLk5MmT2rp1i5F93VRgnjp1krgEAAAoYnbt/NHIfm7yJh8+cwkAAICc3dJNPn9WpkxZk7sDAADAbZKcfPSqZWFhZYzs21hglilTVu3adzC1OwAAANxGycnJipk/N9syi8XMVWqegwkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACj7pjA3L9/v5xOp5F9HTp0UDt2bL9q+caNG7R3714jxwAAACisCkVgZmZmavCggfr9999dy3b++KMuXbqUp+2dTqdaP/+c2rdr64rM2JgYpaWlyWazuX5SkpP11ltvymq1XnN/06ZN05NPPK5ly5Zmi9atW7eq/sMPacuWzTfxLgEAAIoGL3dP4HqcTqf69+urb79dokuXLunTzz6XJGVkZOiZp1tp0ODBat68hSwWS677SEzcpiNHflG37t1d42Ji5uv1119VZGRl17hjx47p0KGDerzJ42r21FM57stqtWre3DmqXr26oqJaavy492S32zVo8BB5eXrJz89f9es/YvA3AAAAULgU+DOY0778Qt9+u0SvDByoSZOnuJY//sQT+urrmfrwgw/07DOttHv37lz3ETN/vqpXr66BAwe5LpV7eXmpceMmil+x0vUz4OWX5ePjk2tcSlJ8/HKdOnVK4//xvjw9PbVu3TrFxy+Xh4dFxYoV+F4HAAC47Qp0YK5etUqjR4/Wp599rrFjx8nT0zPb+tKlS2vxkm+VkZmpRo82UGxMzFX7yMzM1MKFcfr886lyOp1qGdVc/fq+JC+vm4vBmTO/1rPP/lWPPtpINptNO3ftVM9evRUQUFyeV+zTarXqtdde1fHjx2/qOAAAAIVVgQ3M2JgYDR4ySDGxC9SoUaMcxyxYEKsNG9Zr0aIlKlOmrCZPnnjVmE8+/khdu3bTX2rW1NKl3yotLU1NmzW7KlbzIjFxm77/7jv99NNPOn36tJKSknQxK0sLYmPVMqqFPv/sM2VlXVDLqBZ65ulW2rJls8a9N1YOh+OGjwUAAFBYFbhrularVW+9+YYCAwO1bVui/P0D9HSrKM2KnqOSJUu6xjmdTn3w/j907Ngxrd+wUQsXLdaGDeuz7Ss+frkmTZqoDh07qkvnTtq+PVHt2rdX69ZttGzpUq1dm6CWUS1c448dO3bNub37ztsKCwtTaGiogoKCNOGTj9WzZy99MuFy2M6YMV3D33pL8StWGvyNAAAAFC4FLjA9PT01cOAglSlb1rWsfYeO+uijDzVu3HjXsvXr12vfvn2aNHmKypV7QJJUqVKlbPuqVau2wsPLKTy8nIICA3XgwH5NmjTZtb5x4yb6euY3rtczZkzXG6+/luO8EhISVKLEXXqscWP99uuvstvtWrNmtZbHE5MAAABXKnCXyD09PbPFpSS1bdtOC2JjdPToEdeyzz6dosjISHXp0jXXfYWEhGjXT7vVs2cvTZ06VbOi5yggoPgNzykrK0tj3n1H77//gWvZ1q1b1LNX72xnVf/M6XTm+LxMAACAoqzAncHMiZ+fn3r07KUX+/TR0mXLtWnTJq1YEa8FCxZe92Ydq9WqPn16690xYxQRESGr1Sq7zXZDx58zZ7ZGjByVLXxtNrv2JiVp2NAhrmVJSUmyWi+6lh09elRr1qxWbGycmjZrdkPHBAAAKKwKRWBK0tChw7RiRbzefnuUfvj+e7Vp01ZPNW9+zW1SU1PVrl0bpaena/HixRo/7j0FBga5LrVv3rxJXTp3co3/738P57ifHj16XvWczXr16ik9/YRCQ0Pl5+cvSVq0ME6JidvUtVt317gRI0fJ39/vpt4zAABAYVRoAtPb21vTp3+lhg3qy9fXV8uWr7juNneVKKETJ07IYberWrVqGjNmrEJDQ13ra9euo4lXfCZzdnS0xox556r95PQQd19fXz3/fOtsyzZv2ihJqlGjRp7fFwAAQFFTaALT6XRq4cI4eXt7y263a+jQIZowYaLuvvvuXLfx8/fXypWrFBJSWsWKFZPNZtPGjRuUmpoqSfLx8VGpUqVc4wOKB9zSHO12u+x2+y3tA8C1nbdnacrheTrw+5HrDwaAO5iPp7c6l2mlR0rm/4mvQhGYp06d0uBBA7Vz5059932CvL2LqXv3bqperYr6D3hZ3bv30H333XfVdg6HQ+fPX1B09CytW7tWCQk/qGHDR9Wvf//rHtNut+f4rEyHw5FrRNrtDtlu8POdAG7MlMPzNDf5+lcwAADS9tNJWvbIZAX7BOXrcQvcXeRXunD+vL78YqoaPPKwgoODtX7DRkVGRqp8+Qr6v//7Xt26ddfHH32oShEV1PTJJzRyxHDNnzdPWVlZkqSJEyeo3kN19Nqrw3R/SIgS1q7Tx59MUIUKFXXhwgVduHBBqamprp8zZ87I6XTqi6n/VNu2rXMMSdslm6zWSznO1+64PJ4HqwO3D2cuASDvLjqsWndyR74ft0CewTx16pS+/PILzfz6KzV5/HEtiFukatWqZRvj7e2tMWPf0+AhQzU7OlrTp0/Tp59O0cCBg/TMs89Ikvr27aeM06fV58WXFBYWJofDod69eiolJUXBwcHy8PDIdhe4JEVFtdSGDRsU4B+gTZs2XfUtQlarVdZL1hzn/UeQ2u12eXgU6HYHAAB3iDC/+/P9mAUuME+ePKk333xdjz3WWBs2btY999xzzfElS5bUy6+8ov4DBujQoUOKiIhwrfPz89O7Y8a6Xnt4eOirr2fe0vxq1qqlHj165rgutHSoho8YSVwC+eilB9qobmBVd08DAAqM3juz37Ds6YYL1gUuMEuVKqUvv5x+w9t5eHhki8vbZdiwV3Nd16Fjx9t+fADZ1Q2sqrpBVdw9DQAoMOoGVtH2jCS3zoFTbQAAADCKwAQAAIBRBCYAAACMIjABAABgFIEJAAAAowhMAAAAGEVgAgAAwCgCEwBugcPhyPFrZa+0f/9+OZ1OI8c7dOigduzYftXyjRs3aO/evUaOAQC3isAEgD9xOp3avj1RiYnbrvvTt++Lenv0qGvuq/Xzz6l9u7auyIyNiVFaWppsNpvrJyU5WW+99aas1py/ivYP06ZN05NPPK5ly5Zmi9atW7eq/sMPacuWzWZ+CQBwCwrcN/kAgLtZLBZt2rhJu3bt1L333SdPz5z/L75v3z6tWb1afn5+evavf9VDD9W7akxi4jYdOfKLunXvLovFIkmKiZmv119/VZGRlV3jjh07pkOHDurxJo+r2VNP5Xg8q9WqeXPnqHr16oqKaqnx496T3W7XoMFD5OXpJT8/f9Wv/4iB3wAA3BoCEwBy8MrAgddcP3fOHC2Mi9OHH36kLl27yt8/IMdxMfPnq3r16ho4cJD279+viIgIeXl5qXHjJvp65jeucTNmTNcbr7+Wa1xKUnz8cp06dUrRs+fI09NT69atU2ZmhoYMHapixfhzDqDg4C8SAOTR0aNHFBx8r14dNlTnL1zQ2nUbdO+99+Y6PjMzUwsXxmnRoiVyOp1qGdVczZo9JS+vm/vTO3Pm13r22b/q0UcbyWazaeeunRo79j0FBBSX5xX7tFqtGjFiuIYMGar777//po4FALeCwASAPBrQv5/27dun9z/4UM899/x1x3/y8Ufq2rWb/lKzpuLiFigtLU1NmzXT0m+/veFjJyZu0/fffafw8HI6ffq0kpOTdTErSwtiY7Vo4UL99ttvysq6oJZRLWS323Uh64LGvTdWEydNlocHH7cHkL8ITADII69ixeRVrJjq1KmTbfnFixe1efNmNWnSxLUsPn65Jk2aqA4dO6pL507avj1R7dq3V+vWbbRs6VKtXZugllEtXOOPHTt2zWO/+87bCgsLU2hoqIKCgjThk4/Vs2cvfTJhoqTLl9iHv/WW4lesNPiOAeDmEJgA8D/nz5/TokWLcl2fevy4/Hx9tX79eknrXctjY2O0bu1axcbG6cmmTSVJtWrVVnh4OYWHl1NQYKAOHNivSZMmu7bJ7TOYOUlISFCJEnfpscaN9duvv8put2vNmtVaHk9MAiiYuG4CAP/j7x+grKwspaen5/jcytwuNbdt205TPv1MZ8+ddW0XEhKiXT/tVs+evTR16lTNip6jgIDiNzynrKwsjXn3Hb3//geuZVu3blHPXr1VsmTJXLdzOp05Pi8TAPIDZzAB4Aq9evXOdd2ypUuVmZmpTp0652lfVqtVffr01rtjxigiIkJWq1V2m+2G5jNnzmyNGDlKZcqWdS2z2ezam5SkYUOHuJYlJSXJar3oWnb06FGtWbNasbFxatqs2Q0dEwBuFYEJALdBamqq2rVro/T0dC1evFjjx72nwMAgjRs3XpK0efMmdencyTX+v/89nON+evTo6Xp+5h/q1aun9PQTCg0NlZ+fvyRp0cI4JSZuU9du3V3jRowcJX9/P9NvDQCui8AEgNvgrhIldOLECTnsdlWrVk1jxoxVaGioa33t2nU08YrPZM6OjtaYMe9ctZ8/x6Uk+fr66vnnW2dbtnnTRklSjRo1TL0FALhpBCYA3AZ+/v5auXKVQkJKq1ixYrLZbNq4cYNSU1MlST4+PipVqpRrfEDxnB/Unld2u/2634kOAPmFm3wAII9yuvEnNw6HQ+fPX1B09Cz16N5NERXL65+ff56nB5/nFooOhyPXdXa7Q7Yb/HwnANwunMEEgGuIjYnR6YzTKl26tA4fPqTg4OA8bTdx4gS9PXqUfHx81PvvfZSwdp18fS9/HvLChQuS5DqbKUlnzpyR0+nUF1P/qVWrVyk2Nk6enp7Z9mm7ZJPVeinH49kdl8PT4XDwYHUAbkdgAsA1lK9QXhMnTNCSJYslSX/723N52q5v337KOH1afV58SWFhYXI4HOrdq6dSUlIUHBwsDw+PbHeBS1JUVEtt2LBBAf4B2rRpkxo1apRtvdVqlfWSNcfj/XFm0263E5gA3I7ABIBrqFOnrmZFz9bEiRMUWjpUrdu0ydN2fn5+enfMWNdrDw8PffX1zFuaS81atdSjR88c14WWDtXwESOJSwAFAoEJAHkwaNBgd09Bw4a9muu6Dh075uNMAODa+K8uAAAAjCIwAQAAYBSBCQAAAKMITAAAABhFYAIAAMAoAhMoADIyMnTy5Ek5nU4dPHhA6enpV405efKkTp8+LUk6fvy49u3bl+2bZZxOp44c+UV79uxxPcg7p+0dDof27dunzMzMHOdis9l04MABpaam3tA31wAA8AcCEygAnnyiiSpWeEDt27VV7Vo1VaF8OfXu3TNb4FWtUlmNHm2o/v36qlJEBdV7qI4SEhIkSZmZmWr+VDNVr1ZVDRvUV4Xy5bRy5Ypsx6hapbIerldXzZo+qXoP1VF42TC98cbrrvVOp1NTJk9WyP33qk7tmoqoWF7Nmj6pX3/9NX9+CQCAIoPABAoIu92u9PR0jRw1Wg88UF4x8+crLm5BtjFHjx7R6tWr1KfPi+r4wgtq0KCBJGlA/37asmWznmzaVH36vCinU+rc6QWlpKRk2/748eMqXqK4Rowcpfvuu0+ff/ap1q9fL0navXu3hg9/U2FhZTR8xEg1b95C27Zt1dgx7+bPLwAAUGTwoHWgAJk9Z65CQkL08MP19XSrKO3YsUNt2rTNNua7739Q2bLhrtdOp1Nr1yaobNlwxcUtkoeHh8LKlNGokSO0Zcvmq7aPiVkgHx8flQu/fJZ0186datSokXbs2C5JGjpsmDp37iK73a758+apZatWt/+NAwCKFAITKCC8vLwUEhIiSQoPLytJSklOzjYmKCgoW1xK0pkzZ5SRkaGqVau5viYwPPzymMOHD2cbW7ZsuHx8fCRJ5R4od/kYv14+y3n//fdLkj768EOlpaWpdu06+ttzf5O/f4Cx9wgAuDNwiRwoIDw9PV3/tlgsOY4JDAzKdfsrt8lt+2sdo3nzFnpl4EAlJx/V26NH6dlnWimiYgWtWrUyT/MHAOAPBCZQQNjtdtdNPTdz9/af7yjP7Ri5jfH09NTYseN0NDlFixYt0dChw3Tx4kX1felF7iYHANwQAhMoIGw2m1JTUyVJyf+7NF6mbNnrbnfXXXcpKChIKSkpcjgckqSU5MuXvR8o90C2sUePHpHVar387yNHJElhoWGSpP/85z8aPvxNXbxo1ZNNm2r02++ocpUqSk9Pl81mM/AOAQB3Cj6DCRQg3bp2UVTLlpr1r28kSXXr1r3uNhaLRY891lhLlixW+3ZtVTEiQv/6Zqa8vLxUv379q8a/8EIHNWz4qL78YqokqU7dOpKkNatXacrkyUr44Qe1a99BB/bv10+7dunBBx9UsWLFDL5LAEBRR2ACBUhGxmmNGjlCktS2XTs999zzedpu8pRPlZySrFWrVmrVqpXy9fXVzG/+ddUZUA8PD+3du1erV62SJL38yitq0KChJKlX77/r3//+t2bPjtaePXskSZGRkZozd56ptwcAuEMQmEAB4ePjo42btigpKUn+/n6qUKFithtxfty5y3WX+J8FBQXphx/W6sCBAzp39qwqRkSoRIkSV40LDy+nbYnbtW/vXgUGBSo8vJxrnZ+fn/459QuN/8f7OvLLLwopXVrBwcG53jAEAEBuCEygAPHy8lKNGjVyXFe6dOlrbmuxWFSpUqXrHsPHx0d/qVkz1/WBgYEKvMZ6AACuh5t8AAAAYBRnMIECoFGjx5SWlnZbj9GsWTMFBgbe1mMAACARmECBMHHS5Nt+jFnRs2/7MQAAkLhEDgAAAMMITAAAABhFYAIAAMAoAhMAAABGEZgAAAAwisAEAACAUQQmAAAAjCIwAQAAYBSBCQAAAKMITAAAABhFYAJAEfDzzz/LZrO5exoAIInABIAiYdeunapRvaomTZqojIwMd08HwB2OwASAIqD186119uxZjRwxXJEPVtKwoUN08OABd08LwB2KwASAIsDP31+dOneRJJ0/f05ffvmF6tSupXZt22jt2rVyOp1uniGAOwmBCQBFRK9evbK9djqdWrlyhZ55uqUaNqiv6OhZysrKctPsANxJCEwAKCIqVoxQkyZNclz3888/q1/fl1S1SqTGj3tPaWlp+Tw7AHcSAhMAipBevf9+zfUnTpzQ+PHjVKXyg+r70ovas2dPPs0MwJ2EwASAIqRly1YKCQm57jir1arZs6PVsEF9Pd0qSitWxMvhcOTDDAHcCbzcPQGgMLBarZo3b66mT5+mXTt3uns6uMITWubuKRR669at07p161S+fAX169dPnTp3VkBAcXdPC0AhxhlMIA/mzZurAf37EZco0g4fPqRhw4Yq8sFKGjliuFKSk909JQCFFIEJ5MH06dPcPQUg32RmZmrSpImqXr2qunfrqm3btrp7SgAKGQITAJAri8Uii8Xi7mkAKGQITCAPel/nzlygKLn77rs1aNBg7dnzb3098xs99FA9d08JQCHDTT5AHnTo0FEWi0XTp0/Tzh9/dPd0gNuiQoWK6tuvnzp16sRNPgBuCYEJ5IG3t7e6dOmqLl26unsqd7zeP76j7RlJrtfTa41W3aAqbpxRwXLp0iVVq1pZx44dy/M2jRs3Vv8BL+upp5rLw4MLWwBuHYEJAEVIfPzyPMWlt7e32rVrr379B6hatWr5MDMAdxICEwCKkBnXeeJBcHCwev+9j3r16q177703n2YF4E5DYAJAEXHw4AElJCTkuK5atWrqP+BltW7dRr6+vvk8MwB3GgITAIqIGTNmZHttsVjUokWU+g94WY0aNeJxQwDyDYEJAEXAhfPnNTt6liTJ3z9Anbt0Ud++fVWhQkU3zwzAnYjABIAiIG5hnIqXKKFhw15T127dFBgY6O4pAbiDEZgAUATUqlVbu3f/LC8v/qwDcD/+EgFAEVC1alV3TwEAXHiiLgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARnm5ewIAcCt673xHdQOruHsaAFBgbM9IcvcUCEwAhV9B+GMKAPj/uEQOoFDx8fR29xQAoFDxdcPfTQITQKHSKaylvD2KuXsaAFAo1C9ZXZVLlM/343KJHECh0qDUX7T8kSk6cv6Yu6cCAAWar6e3KpcoL09L/p9PJDABFDrBPkEK9gly9zQAALngEjkAAACMIjABAABgFIEJAAAAowhMAAAAGEVgAgAAwCgCEwAAAEYRmAAAADCKwAQAAIBRBCYAAACMMvZNPsnJR5WcnGxqdwAAALiNUpKP3rZ9G/2qyJj5c03uDgAAAIUQl8gBAABg1E0Fpre3t+l5AAAAwM1MNd5NBeY999yjUqVKGZkAAAAACobIyEgj+7Gc+f2c82Y2PHv2rLZu3aKT6SckWYxMBgAAAPnP29tbkZGRejCysiyWW++6mw5MAAAAICfc5AMAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACjCEwAAAAYRWACAADAKAITAAAARhGYAAAAMIrABAAAgFEEJgAAAIwiMAEAAGAUgQkAAACj/h8FRfzkU/Gi0gAAAABJRU5ErkJggg==" alt="image-20210925185145405"></p> <h3 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h3> <ol><li>父组件使用子组件时，传入自定义属性</li> <li>子组件内部接收属性</li></ol> <h3 id="格式-2"><a href="#格式-2" class="header-anchor">#</a> 格式</h3> <p>父组件-传入数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>子组件 自定义属性<span class="token number">1</span><span class="token operator">=</span><span class="token punctuation">{</span>值<span class="token number">1</span><span class="token punctuation">}</span> 自定义属性<span class="token number">2</span><span class="token operator">=</span><span class="token punctuation">{</span>值<span class="token number">2</span><span class="token punctuation">}</span> <span class="token operator">...</span><span class="token punctuation">.</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>子组件-函数式组件-接收数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 接收数据： 函数组件需要通过补充形参来获取</span>
<span class="token keyword">function</span> <span class="token function">子组件</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'从父组件中传入的自定义属性被收集在对象:'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>子组件的内容<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>子组件-类组件-接收数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 接收数据： class 组件需要通过 this.props 来获取</span>
<span class="token keyword">class</span> 子组件 <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'从父组件中传入的自定义属性被收集在对象:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>子组件的内容<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="示例-函数组件获取props"><a href="#示例-函数组件获取props" class="header-anchor">#</a> 示例：函数组件获取props</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 接收数据：</span>
<span class="token comment">// props 的值就是：{ age: 19 }</span>
<span class="token keyword">function</span> <span class="token function">HelloFunc</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>接收到数据<span class="token operator">:</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 传递数据：</span>
<span class="token comment">// 可以把传递数据理解为调用函数 Hello，即：HelloFunc({ age: 19 })</span>
<span class="token operator">&lt;</span>HelloFunc age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="示例-类组件获取props"><a href="#示例-类组件获取props" class="header-anchor">#</a> 示例：类组件获取props</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 接收数据：</span>
<span class="token comment">// class 组件需要通过 this.props 来获取</span>
<span class="token keyword">class</span> <span class="token class-name">HelloClass</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>接收到的数据<span class="token operator">:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 传递数据：</span>
<span class="token operator">&lt;</span>HelloClass age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h3> <p>____________是实现组件通讯的关键</p> <h2 id="props的三个注意事项"><a href="#props的三个注意事项" class="header-anchor">#</a> props的三个注意事项</h2> <h3 id="目标-4"><a href="#目标-4" class="header-anchor">#</a> 目标</h3> <p>了解props的特点，知道什么是单向数据流</p> <h3 id="内容-2"><a href="#内容-2" class="header-anchor">#</a> 内容</h3> <ul><li><ol><li>可以传递任意数据</li></ol></li> <li><ol start="2"><li>只读的</li></ol></li> <li><ol start="3"><li><strong>单向数据流</strong></li></ol></li></ul> <h3 id="可以传递任意数据"><a href="#可以传递任意数据" class="header-anchor">#</a> 可以传递任意数据</h3> <p>props可以传递：数字，  字符串，  布尔类型， 数组， 对象， 函数， jsx</p> <h3 id="props-是只读对象"><a href="#props-是只读对象" class="header-anchor">#</a> <strong>props 是只读对象</strong></h3> <p>只能读取对象中的属性，无法修改</p> <div class="language- extra-class"><pre class="language-text"><code>this.props.age =20 // 错误
</code></pre></div><h3 id="单向数据流"><a href="#单向数据流" class="header-anchor">#</a> <code>单向数据流</code></h3> <p>也叫做：自<strong>上</strong>而<strong>下</strong>的数据流</p> <ol><li>父组件中的数据可以通过 props 传递给子组件，并且，当父组件中的数据更新时，子组件就会自动接收到最新的数据</li> <li>父组件的数据更新会流动到子组件，不能反过来，子组件直接去修改父组件的数据</li> <li>类比：就像瀑布的水一样只能从上往下流动，并且，当上游的水变浑浊，下游的水也会受到影响</li></ol> <h2 id="props的children属性"><a href="#props的children属性" class="header-anchor">#</a> props的children属性</h2> <h3 id="目标-5"><a href="#目标-5" class="header-anchor">#</a> 目标</h3> <p>掌握props中children属性的用法</p> <h3 id="children属性"><a href="#children属性" class="header-anchor">#</a> children属性</h3> <ul><li>children属性：表示该组件的子节点，只要组件有子节点，props就有该属性</li> <li>children 属性与普通的props一样，值可以是任意值（文本、React元素、组件，甚至是函数）</li></ul> <p><img src="/jiely/assets/img/image-20211107162059948.86dc7b2f.png" alt="image-20211107162059948"></p> <h3 id="核心代码"><a href="#核心代码" class="header-anchor">#</a> 核心代码</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      该组件的子节点：</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是子节点</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Hello</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="组件通讯-父传子"><a href="#组件通讯-父传子" class="header-anchor">#</a> 组件通讯-父传子</h2> <h3 id="目标-6"><a href="#目标-6" class="header-anchor">#</a> 目标</h3> <p>将父组件的数据，传递给子组件</p> <p><strong>内容</strong>：</p> <ul><li>父组件提供要传递的state数据</li> <li>给子组件标签添加属性，值为 state 中的数据</li> <li>子组件中通过 props 接收父组件中传递的数据</li></ul> <p><strong>核心代码</strong></p> <p>父组件提供数据并且传递给子组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'王'</span> <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                传递数据给子组件：<span class="token operator">&lt;</span>Child name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastName<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>子组件接收数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>子组件接收到数据：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="组件通讯-父传子典型应用"><a href="#组件通讯-父传子典型应用" class="header-anchor">#</a> 组件通讯-父传子典型应用</h2> <h3 id="目标-7"><a href="#目标-7" class="header-anchor">#</a> 目标</h3> <p>如下图示中：</p> <ol><li>有4个组件，最外层是父组件，内部有三个子组件。</li> <li>列表数据（共有三条）定义在父组件中。</li></ol> <p>请完成：</p> <ol><li>定义子组件，接收父组件传递的数据并渲染</li></ol> <img src="/jiely/assets/img/image-20211106210439507.59cac974.png" alt="image-20211106210439507" style="zoom:50%;"> <h3 id="基础代码"><a href="#基础代码" class="header-anchor">#</a> 基础代码</h3> <h4 id="文件目录"><a href="#文件目录" class="header-anchor">#</a> 文件目录</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>- index.js    <span class="token comment"># 父组件，导入子组件使用</span>
- GoodItem.js <span class="token comment"># 子组件，导出子组件</span>
</code></pre></div><h4 id="初始代码"><a href="#初始代码" class="header-anchor">#</a> 初始代码</h4> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token comment">// 引入子组件</span>
<span class="token keyword">import</span> GoodItem <span class="token keyword">from</span> <span class="token string">'./GoodItem'</span>

<span class="token keyword">class</span> <span class="token class-name">Element</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'棒棒糖'</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'大鸡腿'</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'冰激凌'</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'1px solid #ccc'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">500</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>商品列表<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
       
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
          <span class="token literal-property property">总价</span><span class="token operator">:</span><span class="token number">1000</span>
          
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Element <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>GoodItem.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* eslint-disable react/prop-types */</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">GoodItem</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'1px solid #520'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">paddingLeft</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>商品名<span class="token operator">:</span> xx <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>数量<span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>单价<span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>总价<span class="token operator">:</span> <span class="token number">20</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="功能完成"><a href="#功能完成" class="header-anchor">#</a> 功能完成</h3> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>商品列表<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>GoodItem name<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">}</span> price<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>price<span class="token punctuation">}</span> num<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>num<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>id<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
          <span class="token literal-property property">总价</span><span class="token operator">:</span>
          <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> acc <span class="token operator">+</span> cur<span class="token punctuation">.</span>price <span class="token operator">*</span> cur<span class="token punctuation">.</span>num
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre></div><p>GoodItem.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> num<span class="token punctuation">,</span> price <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'1px solid #520'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">paddingLeft</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>商品名<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>数量<span class="token operator">:</span> <span class="token punctuation">{</span>num<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>单价<span class="token operator">:</span> <span class="token punctuation">{</span>price<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>总价<span class="token operator">:</span> <span class="token punctuation">{</span>price <span class="token operator">*</span> num<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="组件通讯-子传父"><a href="#组件通讯-子传父" class="header-anchor">#</a> 组件通讯-子传父</h2> <h3 id="目标-8"><a href="#目标-8" class="header-anchor">#</a> 目标</h3> <p>能够将子组件的数据传递给父组件</p> <h3 id="思路"><a href="#思路" class="header-anchor">#</a> 思路</h3> <p>利用回调函数，父组件提供回调，子组件调用，将要传递的数据作为回调函数的参数。</p> <h3 id="步骤-2"><a href="#步骤-2" class="header-anchor">#</a> 步骤</h3> <ol><li>父组件
<ol><li>定义一个回调函数f（将会用于接收数据）</li> <li>将该函数f作为属性的值，传递给子组件</li></ol></li> <li>子组件
<ol><li>通过 props 获取f</li> <li>调用f，并传入将子组件的数据</li></ol></li></ol> <h3 id="核心代码-2"><a href="#核心代码-2" class="header-anchor">#</a> 核心代码</h3> <p>父组件提供函数并且传递给子组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'接收到子组件数据'</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            	子组件：<span class="token operator">&lt;</span>Child f<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>f<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>子组件接收函数并且调用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 调用父组件传入的props，并传入参数</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我，给父组件传递数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p>子传父：在子组件中调用从父组件中定义的方法，并根据需要传入参数</p> <h2 id="组件通讯-子传父典型应用"><a href="#组件通讯-子传父典型应用" class="header-anchor">#</a> 组件通讯-子传父典型应用</h2> <h3 id="目标-9"><a href="#目标-9" class="header-anchor">#</a> 目标</h3> <p>在上面的案例的基础上，给子组件增加一个功能： 增加数量</p> <img src="/jiely/assets/img/image-20211106211650306.c5f64fb7.png" alt="image-20211106211650306" style="zoom:50%;"> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">addNum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>it<span class="token punctuation">,</span> <span class="token literal-property property">num</span><span class="token operator">:</span> it<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>it <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">list</span><span class="token operator">:</span> newList <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>


<span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>GoodItem
            addNum<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>addNum<span class="token punctuation">}</span>
            id<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
            name<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
            price<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>price<span class="token punctuation">}</span>
            num<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>num<span class="token punctuation">}</span>
            key<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p>GoodItem.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">+</span>  <span class="token function-variable function">hAddNum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">addNum</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token operator">+</span>  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> num<span class="token punctuation">,</span> price <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'1px solid #520'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">paddingLeft</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>商品名<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
<span class="token operator">+</span>          数量<span class="token operator">:</span> <span class="token punctuation">{</span>num<span class="token punctuation">}</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hAddNum<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>单价<span class="token operator">:</span> <span class="token punctuation">{</span>price<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>总价<span class="token operator">:</span> <span class="token punctuation">{</span>price <span class="token operator">*</span> num<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="组件通讯-兄弟组件"><a href="#组件通讯-兄弟组件" class="header-anchor">#</a> 组件通讯-兄弟组件</h2> <p>**目标：**能够理解什么是状态提升，并实现兄弟组件之间的组件通讯</p> <h3 id="问题导入"><a href="#问题导入" class="header-anchor">#</a> 问题导入</h3> <p><img src="/jiely/assets/img/image-20211106220927095.d3decf6a.png" alt="image-20211106220927095"></p> <h3 id="思路-2"><a href="#思路-2" class="header-anchor">#</a> 思路</h3> <ul><li>将共享状态提升到最近的公共父组件中，由公共父组件管理这个状态</li> <li>思想：<strong>状态提升</strong></li> <li>公共父组件职责：
<ul><li>提供共享状态</li> <li>提供操作共享状态的方法</li></ul></li> <li>要通讯的子组件只需通过 props 接收状态或操作状态的方法</li></ul> <p><img src="/jiely/assets/img/image-20211106220859865.7724db3d.png" alt="image-20211106220859865"></p> <h3 id="核心代码-3"><a href="#核心代码-3" class="header-anchor">#</a> 核心代码</h3> <ul><li><code>parent.js</code></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> Jack <span class="token keyword">from</span> <span class="token string">'./Jack'</span>
<span class="token keyword">import</span> Rose <span class="token keyword">from</span> <span class="token string">'./Rose'</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 状态提升到父组件</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是App组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Jack</span></span> <span class="token attr-name">say</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeMsg<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Jack</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* 2. 把状态给子组件显示 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Rose</span></span> <span class="token attr-name">msg</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Rose</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">changeMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      msg<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 渲染组件</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><code>Son1.js</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Jack</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是Jack组件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>say<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">说</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">'you jump i look'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>Son2.js</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Rose</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是Rose组件-</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="组件通讯-跨级组件通讯-难点"><a href="#组件通讯-跨级组件通讯-难点" class="header-anchor">#</a> 组件通讯 -跨级组件通讯（难点）</h2> <h3 id="目标-10"><a href="#目标-10" class="header-anchor">#</a> 目标</h3> <p>学习Context的使用，能用context实现跨级组件通讯</p> <p><img src="/jiely/assets/img/image-20211107093516616.a2da33df.png" alt="image-20211107093516616"></p> <h3 id="基本素材代码结构"><a href="#基本素材代码结构" class="header-anchor">#</a> 基本素材代码结构</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>-index.css <span class="token comment"># 样式</span>
-index.js  <span class="token comment"># 根组件</span>
-Parent.js <span class="token comment"># 父组件,与Uncle同级</span>
-Uncle.js  <span class="token comment"># </span>
-Son.js    <span class="token comment"># 子组件</span>
</code></pre></div><h4 id="index-js"><a href="#index-js" class="header-anchor">#</a> index.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> Parent <span class="token keyword">from</span> <span class="token string">'./Parent'</span>
<span class="token keyword">import</span> Uncle <span class="token keyword">from</span> <span class="token string">'./Uncle'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          根组件， num<span class="token operator">:</span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Parent <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Uncle <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="parent-js"><a href="#parent-js" class="header-anchor">#</a> parent.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./Son'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        我是parent组件
        <span class="token operator">&lt;</span>Son <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="uncle-js"><a href="#uncle-js" class="header-anchor">#</a> Uncle.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Uncle</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是Uncle组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="son-js"><a href="#son-js" class="header-anchor">#</a> Son.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>我是son组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="思路-3"><a href="#思路-3" class="header-anchor">#</a> 思路</h3> <p><img src="/jiely/assets/img/image-20211107095917113.e160faa4.png" alt="image-20211107095917113"></p> <h3 id="使用context-上下文-的步骤"><a href="#使用context-上下文-的步骤" class="header-anchor">#</a> 使用Context（上下文）的步骤</h3> <p>共3步：</p> <ol><li><p>导入并调用createContext方法，从结果中解构出 Provider, Consumer 组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> Consumer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>使用 <strong>Provider</strong> 组件<strong>包裹根组件</strong>，并通过 <strong>value</strong> 属性提供要共享的数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span> 这里放要传递的数据 <span class="token punctuation">}</span><span class="token operator">&gt;</span>
  	<span class="token operator">&lt;</span>根组件的内容<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>在任意后代组件中，使用第1步中导出的Consumer组件包裹整个组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
	<span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
  	<span class="token punctuation">{</span>
      <span class="token parameter">（data）</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      	<span class="token comment">// 这里的形参data 就会自动接收Provider中传入的数据</span>
        <span class="token comment">// console.log(data)</span>
      	<span class="token keyword">return</span> <span class="token operator">&lt;</span>组件的内容<span class="token operator">&gt;</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div></li></ol> <h3 id="落地代码"><a href="#落地代码" class="header-anchor">#</a> 落地代码</h3> <p>建立context.js文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> Consumer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> Consumer<span class="token punctuation">,</span> Provider <span class="token punctuation">}</span>
</code></pre></div><p>改造根组件</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>

<span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          根组件, num: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Parent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Uncle</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>改造后代组件 Uncle.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Uncle</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是Uncle组件<span class="token punctuation">,</span> <span class="token punctuation">{</span>data<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="综合案例-b站评论列表"><a href="#综合案例-b站评论列表" class="header-anchor">#</a> 综合案例：B站评论列表</h2> <h3 id="目标-11"><a href="#目标-11" class="header-anchor">#</a> 目标</h3> <p>B站评论列表案例拆分成多个组件</p> <h3 id="思路-4"><a href="#思路-4" class="header-anchor">#</a> 思路</h3> <ol><li><p>按功能模块拆分组件</p> <p><code>/index.js</code></p> <p><code>/components/Tabs.js</code></p> <p><code>/components/Form.js</code></p> <p><code>/components/List.js</code></p></li></ol> <p><img src="/jiely/assets/img/image-20211107113409470.96ff633d.png" alt="image-20211107113409470"></p> <h3 id="props传递"><a href="#props传递" class="header-anchor">#</a> props传递</h3> <p>数据和操作数据的方法都集中在父组件中</p> <p><img src="/jiely/assets/img/image-20211107143819512.099f2c2d.png" alt="image-20211107143819512"></p> <h2 id="tab栏切换功能"><a href="#tab栏切换功能" class="header-anchor">#</a> tab栏切换功能</h2> <p>**目标：**完成tab栏切换功能</p> <p><strong>步骤</strong></p> <ol><li>渲染tab栏</li> <li>完成tab栏的切换功能</li></ol> <p><strong>核心代码</strong></p> <p>index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Tabs tabs<span class="token operator">=</span><span class="token punctuation">{</span>tabs<span class="token punctuation">}</span> active<span class="token operator">=</span><span class="token punctuation">{</span>active<span class="token punctuation">}</span> changeSort<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hChangeSort<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>components/Tabs.js</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/* eslint-disable react/prop-types */</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Tabs</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> tabs<span class="token punctuation">,</span> changeSort<span class="token punctuation">,</span> active <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabs-order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sort-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* 调用回调时，传入item.type */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token punctuation">{</span>tabs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">changeSort</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>type <span class="token operator">===</span> active <span class="token operator">?</span> <span class="token string">'on'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              按</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">排序 - </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>type<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* &lt;li className=&quot;on&quot;&gt;按  热度  排序&lt;/li&gt;
            &lt;li&gt;按  时间   排序&lt;/li&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="评论列表展示-父传子"><a href="#评论列表展示-父传子" class="header-anchor">#</a> 评论列表展示-父传子</h2> <p>**目标：**通过父传子的方式实现评论列表的展示</p> <p><strong>步骤</strong></p> <ol><li>父组件通过父传子的方式把list传递给子组件</li> <li>子组件渲染评论列表案例</li></ol> <p><strong>核心代码</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/* eslint-disable react/prop-types */</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Tabs</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// eslint-disable-next-line react/prop-types</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> hChangeAttitude<span class="token punctuation">,</span> hDel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-face<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-head<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>img<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>author<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>comment<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>time<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token comment">/* 喜欢 */</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
                  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">hChangeAttitude</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                  <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>attitude <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'like liked'</span> <span class="token operator">:</span> <span class="token string">'like'</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token comment">/* 不喜欢 */</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
                  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">hChangeAttitude</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                  <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>attitude <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'hate hated'</span> <span class="token operator">:</span> <span class="token string">'hate'</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
                  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply btn-hover<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">hDel</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  删除
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="添加评论-子传父"><a href="#添加评论-子传父" class="header-anchor">#</a> 添加评论-子传父</h2> <p>**目标：**完成评论添加功能</p> <p><strong>步骤：</strong></p> <ol><li>子组件以受控组件的方式获取评论内容</li> <li>子组件通过子传父的方式将评论内容传递给父组件</li> <li>父组件接收到评论内容，并且添加评论内容</li></ol> <p><strong>核心代码</strong></p> <ul><li>子组件核心代码</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/* eslint-disable react/prop-types */</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">hChangeText</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(e.target.value)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">hAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">hAdd</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> content <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">const</span> <span class="token punctuation">{</span> avatar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment-send<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-face<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-head<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>avatar<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>
            <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>发条友善的评论<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipt-txt<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hChangeText<span class="token punctuation">}</span></span>
            <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hAdd<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment-submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            发表评论
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment-emoji<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>face<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">表情</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>父组件核心代码</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 添加评论 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">avatar</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>avatar<span class="token punctuation">}</span></span> <span class="token attr-name">hAdd</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hAdd<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

  <span class="token function-variable function">hAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">comment</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 添加content到list</span>
    <span class="token keyword">const</span> newList <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'小花'</span><span class="token punctuation">,</span>
        comment<span class="token punctuation">,</span>
        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// todo:格式化</span>
        <span class="token literal-property property">img</span><span class="token operator">:</span> avatar<span class="token punctuation">,</span>
        <span class="token literal-property property">attitude</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list
    <span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> newList
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jiely/chapter1/02-React组件基础.html" class="prev">
        React组件基础
      </a></span> <span class="next"><a href="/jiely/chapter1/04-React组件进阶.html">
        React组件进阶
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/jiely/assets/js/app.87156db4.js" defer></script><script src="/jiely/assets/js/3.05e47443.js" defer></script><script src="/jiely/assets/js/10.1bb09252.js" defer></script>
  </body>
</html>
