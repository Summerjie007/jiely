<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redux 中间件 | react 快速上手</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="./images/favicon.ico">
    <meta name="description" content="杰哥哥前端研究院">
    
    <link rel="preload" href="/jiely/assets/css/0.styles.5afc0e25.css" as="style"><link rel="preload" href="/jiely/assets/js/app.87156db4.js" as="script"><link rel="preload" href="/jiely/assets/js/3.05e47443.js" as="script"><link rel="preload" href="/jiely/assets/js/11.7487ab28.js" as="script"><link rel="prefetch" href="/jiely/assets/js/10.1bb09252.js"><link rel="prefetch" href="/jiely/assets/js/12.a9e0b5c6.js"><link rel="prefetch" href="/jiely/assets/js/13.46042c4c.js"><link rel="prefetch" href="/jiely/assets/js/14.7e9485d0.js"><link rel="prefetch" href="/jiely/assets/js/15.82bd5665.js"><link rel="prefetch" href="/jiely/assets/js/16.da48c8d1.js"><link rel="prefetch" href="/jiely/assets/js/17.4c4fbca4.js"><link rel="prefetch" href="/jiely/assets/js/18.8f64b26e.js"><link rel="prefetch" href="/jiely/assets/js/19.6e619bb0.js"><link rel="prefetch" href="/jiely/assets/js/2.af879dde.js"><link rel="prefetch" href="/jiely/assets/js/20.a8659479.js"><link rel="prefetch" href="/jiely/assets/js/21.c50358c3.js"><link rel="prefetch" href="/jiely/assets/js/22.2b3cb2cc.js"><link rel="prefetch" href="/jiely/assets/js/23.ef2a71c6.js"><link rel="prefetch" href="/jiely/assets/js/24.713e58c4.js"><link rel="prefetch" href="/jiely/assets/js/25.9e2de17e.js"><link rel="prefetch" href="/jiely/assets/js/26.ebe2c2c7.js"><link rel="prefetch" href="/jiely/assets/js/27.b410c517.js"><link rel="prefetch" href="/jiely/assets/js/28.416e0f83.js"><link rel="prefetch" href="/jiely/assets/js/29.28bb402e.js"><link rel="prefetch" href="/jiely/assets/js/30.117590fb.js"><link rel="prefetch" href="/jiely/assets/js/31.012589f4.js"><link rel="prefetch" href="/jiely/assets/js/32.391074f7.js"><link rel="prefetch" href="/jiely/assets/js/33.3b5bff31.js"><link rel="prefetch" href="/jiely/assets/js/34.5f03808f.js"><link rel="prefetch" href="/jiely/assets/js/35.c836f09c.js"><link rel="prefetch" href="/jiely/assets/js/36.cdfd4095.js"><link rel="prefetch" href="/jiely/assets/js/37.3888e0de.js"><link rel="prefetch" href="/jiely/assets/js/38.9d42564b.js"><link rel="prefetch" href="/jiely/assets/js/39.af6cc2f1.js"><link rel="prefetch" href="/jiely/assets/js/4.cb17c8a3.js"><link rel="prefetch" href="/jiely/assets/js/40.28ea6c30.js"><link rel="prefetch" href="/jiely/assets/js/41.07ff3483.js"><link rel="prefetch" href="/jiely/assets/js/42.461144bb.js"><link rel="prefetch" href="/jiely/assets/js/43.7381291e.js"><link rel="prefetch" href="/jiely/assets/js/44.e99c69d5.js"><link rel="prefetch" href="/jiely/assets/js/45.82ace09a.js"><link rel="prefetch" href="/jiely/assets/js/46.6f99a05f.js"><link rel="prefetch" href="/jiely/assets/js/47.50c29aca.js"><link rel="prefetch" href="/jiely/assets/js/48.8de86252.js"><link rel="prefetch" href="/jiely/assets/js/49.7b800d70.js"><link rel="prefetch" href="/jiely/assets/js/5.8ae26c23.js"><link rel="prefetch" href="/jiely/assets/js/6.9b2d155f.js"><link rel="prefetch" href="/jiely/assets/js/7.276458e1.js"><link rel="prefetch" href="/jiely/assets/js/8.b230375e.js"><link rel="prefetch" href="/jiely/assets/js/9.fae1b1d4.js">
    <link rel="stylesheet" href="/jiely/assets/css/0.styles.5afc0e25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jiely/" class="home-link router-link-active"><img src="/jiely/images/logo.jpg" alt="react 快速上手" class="logo"> <span class="site-name can-hide">react 快速上手</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://juejin.cn/post/7097067108663558151" target="_blank" rel="noopener noreferrer" class="nav-link external">
  50+Vue经典面试题源码级
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://segmentfault.com/a/1190000018604138" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://juejin.cn/post/6844904055840440334" target="_blank" rel="noopener noreferrer" class="nav-link external">
  从零React项目
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://summerjie007.github.io/vue3_study/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3+TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://juejin.cn/post/7097067108663558151" target="_blank" rel="noopener noreferrer" class="nav-link external">
  50+Vue经典面试题源码级
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://segmentfault.com/a/1190000018604138" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://juejin.cn/post/6844904055840440334" target="_blank" rel="noopener noreferrer" class="nav-link external">
  从零React项目
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://summerjie007.github.io/vue3_study/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3+TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/jiely/00_课程介绍.html" class="sidebar-link">课程指南</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>一.react全家桶上手</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React组件基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React组件通讯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React组件通讯进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>react-hooks基础阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>react-hooks进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>redux基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>redux进阶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jiely/chapter1/08-redux进阶.html" class="active sidebar-link">Redux 中间件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux-中间件" class="sidebar-link">Redux 中间件</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux拓展优化action-creator" class="sidebar-link">redux拓展优化action creator</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux拓展优化action-type的使用" class="sidebar-link">redux拓展优化Action Type的使用</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux-中间件-问题导入" class="sidebar-link">redux-中间件-问题导入</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux-中间件-理解" class="sidebar-link">redux-中间件-理解</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux-中间件-redux-thunk" class="sidebar-link">redux-中间件-redux-thunk</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux-中间件-redux-logger" class="sidebar-link">redux-中间件-redux-logger</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#redux-devtools-extension的使用" class="sidebar-link">redux-devtools-extension的使用</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-头条-整体说明" class="sidebar-link">综合案例-头条-整体说明</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-组件搭建" class="sidebar-link">综合案例-组件搭建</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-redux初始化" class="sidebar-link">综合案例-redux初始化</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-加载频道数据" class="sidebar-link">综合案例-加载频道数据</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-处理频道高亮" class="sidebar-link">综合案例-处理频道高亮</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-获取文章列表" class="sidebar-link">综合案例-获取文章列表</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#综合案例-渲染文章列表" class="sidebar-link">综合案例-渲染文章列表</a></li><li class="sidebar-sub-header"><a href="/jiely/chapter1/08-redux进阶.html#拓展-redux-thunk-中间件原理" class="sidebar-link">拓展-redux-thunk-中间件原理</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>react路由</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二.react全家桶项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>三.前端算法之道</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>四.JS设计设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>五.JS报错总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>六.Vue3+Pinia</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>七.node.js</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="redux-中间件"><a href="#redux-中间件" class="header-anchor">#</a> Redux 中间件</h2> <h2 id="redux拓展优化action-creator"><a href="#redux拓展优化action-creator" class="header-anchor">#</a> redux拓展优化action creator</h2> <h3 id="问题导入"><a href="#问题导入" class="header-anchor">#</a> 问题导入</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'book/add'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token string">'三国演义'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'book/add'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token string">'红楼梦'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>一个action的type名字出现多次，多次dispatch会重复，不利于修改。</p> <h3 id="思路"><a href="#思路" class="header-anchor">#</a> 思路</h3> <p>补充一个action creator。</p> <ul><li>它是一个函数。</li> <li>作用：用来创建<strong>指定类型</strong>的action。</li> <li>入参：payload</li> <li>返回值: action</li> <li>示例：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">addAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'book/add'</span><span class="token punctuation">,</span> payload<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">'三国演义'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">'红楼梦'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="实操"><a href="#实操" class="header-anchor">#</a> 实操</h3> <p>在store目录下，补充创建actions目录，按reducer的模块，来划分每一个具体的actions</p> <div class="language- extra-class"><pre class="language-text"><code>├── src
   ├── store          # redux目录，一般约定叫store
   |     ├── index.js   # 定义并导出store. 其中会导入reducer
+  |     └── actions    # 多个模块的action
+  |         ├── action1.js    # 模块1的 相关action creator
+  |         ├── action2.js    # 模块2的 相关action creator
   |     └── reducers   # 多个模块的reducer
   |         ├── reducer1.js   # 模块1的reducer
   |         ├── reducer2.js   # 模块2的reducer
   |         └── index.js      # reducer的整体入口，会导入reducer1, reducer2
   ├── index.js       # 项目的入口文件，会导入并渲染App.js
   ├── App.js         # 根组件，引入模块1 和模块2 组件
   ├── 模块1.js       # 模块1 组件
   └── 模块2.js       # 模块2 组件
</code></pre></div><p>示例代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'book/add'</span><span class="token punctuation">,</span> payload<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="redux拓展优化action-type的使用"><a href="#redux拓展优化action-type的使用" class="header-anchor">#</a> redux拓展优化Action Type的使用</h2> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <p>了解action type的作用</p> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <p>背景：在reducer和action creator中都用到了一个字符串的 action type。</p> <p>问题：容易写错，不利于统一修改。</p> <h3 id="解决"><a href="#解决" class="header-anchor">#</a> 解决</h3> <p>思路：<strong>集中处理 action type，保持项目中 action type 的一致性</strong></p> <p>处理方式：</p> <ol><li>在 store 目录中创建 <code>actionTypes</code> 目录或者 <code>constants</code> 目录，集中处理</li> <li>使用<strong>常量</strong>来存储 action type。例如</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_NAME</span> <span class="token operator">=</span> <span class="token string">'user/setName'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SUB_MORE</span> <span class="token operator">=</span> <span class="token string">'money/subMore'</span>
</code></pre></div><ol start="3"><li>将项目中用到 action type 的地方替换为这些常量，从而保持项目中 action type 的一致性</li></ol> <h2 id="redux-中间件-问题导入"><a href="#redux-中间件-问题导入" class="header-anchor">#</a> redux-中间件-问题导入</h2> <h3 id="目标-2"><a href="#目标-2" class="header-anchor">#</a> 目标</h3> <p>能够理解为什么需要redux中间件</p> <h3 id="问题-2"><a href="#问题-2" class="header-anchor">#</a> 问题</h3> <p>问题：获取数据时，如何发ajax拿数据，并保存到redux中？</p> <h3 id="方案"><a href="#方案" class="header-anchor">#</a> 方案</h3> <p>方案1：在业务组件中发请求，拿到数据之后，再dispath</p> <p><img src="/jiely/assets/img/image-20211113185506511.bd78aae6.png" alt="image-20211113185506511"></p> <p>方案2：在业务组件中直接dispatch，在dispatch中发请求，然后保存redux。</p> <p><img src="/jiely/assets/img/image-20211113185523220.e61f5907.png" alt="image-20211113185523220"></p> <h2 id="redux-中间件-理解"><a href="#redux-中间件-理解" class="header-anchor">#</a> redux-中间件-理解</h2> <h3 id="中间件"><a href="#中间件" class="header-anchor">#</a> 中间件</h3> <p>中间件：middleware。用来在不损害原功能的前提下，引入额外的代码来拓展功能。</p> <img src="/jiely/assets/img/image.suning.a0c267d0.jpeg" alt="img" style="zoom:33%;"> <p>Redux 中间件</p> <ul><li>中间：在 <strong>dispatch action</strong> 和 到达 <strong>reducer</strong> 之间</li></ul> <h3 id="图示"><a href="#图示" class="header-anchor">#</a> 图示</h3> <p><strong>没有中间件</strong>：</p> <p><code>dispatch(action) =&gt; reducer</code>。用来发起状态更新</p> <p><img src="/jiely/assets/img/redux1.0cb1aec2.jpg" alt="redux1"></p> <p><strong>使用中间件</strong>：</p> <ul><li><p><code>dispatch(action) =&gt; 执行中间件代码 =&gt; reducer</code>。</p></li> <li><p>dispatch() 就是 中间件 封装处理后的 dispatch，但是，最终一定会调用 Redux 库自己提供的 dispatch 方法</p></li></ul> <p><img src="/jiely/assets/img/redux2.a861f6ea.jpg" alt="redux2"></p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ol><li><p>中间件是对原有功能的拓展</p></li> <li><p>redux中间件的执行时机在dispatch之后，执行reducer逻辑之前</p></li></ol> <h2 id="redux-中间件-redux-thunk"><a href="#redux-中间件-redux-thunk" class="header-anchor">#</a> redux-中间件-redux-thunk</h2> <h3 id="目标-3"><a href="#目标-3" class="header-anchor">#</a> 目标</h3> <p>掌握redux-thunk的使用，能用它来发异步请求</p> <p>理解中间件的工作方式。</p> <h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h3> <p><code>redux-thunk</code> 中间件允许redux处理<code>函数形式的 action</code>。在函数形式的 action 中就可以执行异步操作代码，完成异步操作。</p> <p><strong>之前</strong></p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> action1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'todos/add'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token string">'学习redux'</span><span class="token punctuation">}</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span>action1<span class="token punctuation">)</span>
</code></pre></div></li></ul> <p><strong>之后</strong></p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">action1</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">异步动作</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'todos/add'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token string">'学习redux'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">dispatch</span><span class="token punctuation">(</span>action1<span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h3> <ol><li><p>安装：<code>npm i redux-thunk</code></p></li> <li><p>使用：在<strong>store/index.js</strong></p> <ol><li>导入 redux-thunk , applyMiddleware</li></ol></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
      <span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>
</code></pre></div><ol start="2"><li>调用applyMiddleware将 thunk 添加到中间件列表中</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>修改 action creator，返回一个函数，其形参就是redux的dispatch</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token keyword">const</span> <span class="token function-variable function">addTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">异步动作</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'todos/add'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> name<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token string">'学习redux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">addTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'https://www.fastmock.site/mock/74f9d773e725851c64a71332d919de0c/books/api/testpost'</span><span class="token punctuation">)</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'todos/add'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> name<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token string">'学习redux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h3> <ol><li>redux提供了applyMiddleware功能， 允许我们去添加中间件</li> <li>redux-thunk拓展了dispatch的功能，支持<code>函数形式的 action</code></li> <li>redux-thunk允许把发ajax的动作也封装在action中。</li></ol> <h2 id="redux-中间件-redux-logger"><a href="#redux-中间件-redux-logger" class="header-anchor">#</a> redux-中间件-redux-logger</h2> <h3 id="目标-4"><a href="#目标-4" class="header-anchor">#</a> 目标</h3> <p>掌握redux-logger的使用，能查看redux的操作日志；</p> <p>理解多个中间件的工作过程</p> <h3 id="步骤-2"><a href="#步骤-2" class="header-anchor">#</a> 步骤</h3> <ol><li>安装：<code>npm i redux-logger</code></li> <li>使用。store/index.js
<ol><li>导入 redux-logger</li> <li>调用 applyMiddleware 函数时，将 logger 作为参数传入</li></ol></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> logger <span class="token keyword">from</span> <span class="token string">'redux-logger'</span>
<span class="token keyword">import</span> rootReducer <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li><p>测试效果。</p> <p>任意调用 store.dispatch() 查看 logger 中间件记录的日志信息</p></li></ol> <h3 id="小结-3"><a href="#小结-3" class="header-anchor">#</a> 小结</h3> <p>redux-logger可以用来查看开发日志</p> <p>多个中间件按引入顺序执行</p> <h2 id="redux-devtools-extension的使用"><a href="#redux-devtools-extension的使用" class="header-anchor">#</a> redux-devtools-extension的使用</h2> <h3 id="目标-5"><a href="#目标-5" class="header-anchor">#</a> 目标</h3> <p>学会如何在项目中启动调试工具，能通过chrome开发者工具调试跟踪redux状态</p> <h3 id="redux-devtools-extension"><a href="#redux-devtools-extension" class="header-anchor">#</a> redux-devtools-extension</h3> <p>方便在浏览器中调试redux操作的工具</p> <p>先要安装 <code>redux的开发者工具</code>，再安装redux调试工具</p> <p><code>文档</code> <a href="https://www.npmjs.com/package/redux-devtools-extension" target="_blank" rel="noopener noreferrer">redux-devtools-extension<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="步骤-3"><a href="#步骤-3" class="header-anchor">#</a> 步骤</h3> <ol><li>安装react开发者工具（chrome浏览器插件）</li> <li>安装<a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=redux%20chrome%20%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">redux的开发者工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（chrome浏览器插件）</li> <li>在项目中安装redux调试工具，它是一个npm包。 <code>npm i redux-devtools-extension -D</code></li> <li>配置。在store/index.js中进行配置和导入</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-devtools-extension'</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>中间件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div><h3 id="效果"><a href="#效果" class="header-anchor">#</a> 效果</h3> <p>每一次redux的操作，就会有记录</p> <p><img src="/jiely/assets/img/image-20211113200834241.2b672ab5.png" alt="image-20211113200834241"></p> <h2 id="综合案例-头条-整体说明"><a href="#综合案例-头条-整体说明" class="header-anchor">#</a> 综合案例-头条-整体说明</h2> <img src="/jiely/assets/img/image-20211115084825952.3ecb6f14.png" alt="image-20211115084825952" style="zoom:50%;"> <h3 id="功能要求"><a href="#功能要求" class="header-anchor">#</a> 功能要求</h3> <p>频道列表展示</p> <p>点击频道列表高亮选中项</p> <p>显示对应频道下的文章列表</p> <h3 id="接口说明"><a href="#接口说明" class="header-anchor">#</a> 接口说明</h3> <p>获取频道列表</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>geek<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>net<span class="token operator">/</span>v1_0<span class="token operator">/</span>channels

<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>toutiao<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>net<span class="token operator">/</span>v1_0<span class="token operator">/</span>channels

</code></pre></div><p>获取频道新闻</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>geek<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>net<span class="token operator">/</span>v1_0<span class="token operator">/</span>articles<span class="token operator">?</span>channel_id<span class="token operator">=</span>频道id<span class="token operator">&amp;</span>timestamp<span class="token operator">=</span>时间戳

</code></pre></div><h3 id="技术栈"><a href="#技术栈" class="header-anchor">#</a> 技术栈</h3> <p>react,react-redux, redux-thunk</p> <h2 id="综合案例-组件搭建"><a href="#综合案例-组件搭建" class="header-anchor">#</a> 综合案例-组件搭建</h2> <h3 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">|</span>- index.js    <span class="token comment"># 入口文件</span>
<span class="token operator">|</span>- App.js      <span class="token comment"># 根组件</span>
<span class="token operator">|</span>- components  <span class="token comment"># 组件文件夹 </span>
		<span class="token operator">|</span>- Channel.js  <span class="token comment"># 频道列表</span>
		<span class="token operator">|</span>- NewsList.js <span class="token comment"># 新闻列表</span>
</code></pre></div><h3 id="index-js"><a href="#index-js" class="header-anchor">#</a> index.js</h3> <p>引入通用样式(资料中已经准备好)</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">'./styles/index.css'</span>
</code></pre></div><h3 id="components-channel-js"><a href="#components-channel-js" class="header-anchor">#</a> <code>components/Channel.js</code></h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>catagtory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">开发者资讯</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ios</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">c++</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">android</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">css</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">数据库</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">区块链</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">go</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">产品</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span> 

</code></pre></div><h3 id="components-newslist-js"><a href="#components-newslist-js" class="header-anchor">#</a> <code>components/NewsList.js</code></h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'.././assets/back.jpg'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">NewsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article_item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">python数据预处理 ：数据标准化</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>avatar<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">13552285417</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">0评论</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">2018-11-29T17:02:09</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="根组件中渲染"><a href="#根组件中渲染" class="header-anchor">#</a> 根组件中渲染</h3> <p>app.js</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Channel <span class="token keyword">from</span> <span class="token string">'./components/Channel'</span>
<span class="token keyword">import</span> NewsList <span class="token keyword">from</span> <span class="token string">'./components/NewsList'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Channel</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NewsList</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NewsList</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="综合案例-redux初始化"><a href="#综合案例-redux初始化" class="header-anchor">#</a> 综合案例-redux初始化</h2> <h3 id="创建目录结构"><a href="#创建目录结构" class="header-anchor">#</a> 创建目录结构</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">|</span>- store   
		<span class="token operator">|</span>- actions         <span class="token comment"># action creator</span>
        <span class="token operator">|</span>- channel.js  <span class="token comment"># 创建与 频道相关的 的action</span>
        <span class="token operator">|</span>- newsList.js <span class="token comment"># 创建与 新闻列表的 的action</span>
		<span class="token operator">|</span>- reducers        <span class="token comment"># reducer</span>
        <span class="token operator">|</span>- channel.js  <span class="token comment">#  处理频道相关的操作 </span>
        <span class="token operator">|</span>- index.js    <span class="token comment"># 导入 channel.js ,newsList.js 并组合之后，导出</span>
        <span class="token operator">|</span>- newsList.js <span class="token comment">#  处理频道新闻列表相关的操作  </span>
		<span class="token operator">|</span>- actionType.js  <span class="token comment"># 统一管理所有的action类型。定义常量并导出 </span>
		<span class="token operator">|</span>- index.js       <span class="token comment"># 创建store，并导出</span>
</code></pre></div><h3 id="store-index-js"><a href="#store-index-js" class="header-anchor">#</a> store/index.js</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-devtools-extension'</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>

<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token comment">// 中间件</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store

</code></pre></div><h3 id="store-reducers-index-js"><a href="#store-reducers-index-js" class="header-anchor">#</a> store/reducers/index.js</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  channel<span class="token punctuation">,</span>
  news
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="store-reducers-channel-js"><a href="#store-reducers-channel-js" class="header-anchor">#</a> store/reducers/channel.js</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">channel</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state
<span class="token punctuation">}</span>
</code></pre></div><h3 id="store-reducers-news-js"><a href="#store-reducers-news-js" class="header-anchor">#</a> store/reducers/news.js</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">news</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state
<span class="token punctuation">}</span>
</code></pre></div><h3 id="入口文件-index-js"><a href="#入口文件-index-js" class="header-anchor">#</a> 入口文件 index.js</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> <span class="token string">'./styles/index.css'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

</code></pre></div><h3 id="通过开发者工具查看效果"><a href="#通过开发者工具查看效果" class="header-anchor">#</a> 通过开发者工具查看效果</h3> <p><img src="data:image/png;base64,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OWo7ZUrLlEmSq71TpgT3VErisgEWzsamKjEtrKPuLXli16xMWCXFaZiuqG2AoOC79qX+4Ek1abgSzUHcw3lKu7wzLPWfqMEpxY/sfyFu3+cqZF9TLBuzLQCAW8ygrXExJcRIyVZZ11n9Tzjd/3F93i6ljZZJBRod3ynFuwONKV5ynXaXc1wHXlKVtip7cZnc2aVZ9jXr1RbGcbbtLJZ9WZks3jJQ1MslJmZFAADwGLTg4mrvlPSh/5oXX+evuMNB7kSZHPvlSHhCiWkXdE9sp66e9+nHU66RPOtdViwPe7Bo21ksmyRvSSl7WUH/4w5G62VdU4p7BiWQIGJOULwGKi3dvI7PGyPXOQAAYTZo26FdtQ1yJVv7f8aK44JcscOVNjFBF2pr1Ha6XaMzRktql6ufRa/uMBRJNXJ19HHfz9tDK1nVf6IGp0mplsCeoTL9sXQNczbqt5GYbfGst+noMxS5n4cT+pZvAAAiY/C2Qzu2q2rPcmUvLpPVp1rUvbOnWVedVqXF18nhkOQ4LZdnZ4s3t/TcUeQuFfWebUm09nOP3NWyWn06yCiSNaPIZ/dT7x1F7lJRj9mW4+tln1gmS1fJKtBdRY36bb1LFvODMquxz0mXcXkvdy+8banUqi3eHUEpKiwplMVnbNa1L8sql+x7g38mjNmSErlQBABAhNyVbsn+MtqDuLNkqXhtjuLt5dp4sLHXcflsf44Yc75WLkpRQwiB58bcj/RX5SF9/8TALZ9cMFuzxCP/AQCB48m5g65aZcdaNcySr8JgdguFTYoK56RL9sNRenIvAAChuzOfnBttlfu0Sgu14bEsldcP9ocs5shyuVKrDkZ2UW5KzmztzVEAH7IY0WEAAG4zlIoAAIBhUCoCAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACGQXABAACG8f8Bgigf/7WAqhwAAAAASUVORK5CYII=" alt="image-20211115145049682"></p> <h2 id="综合案例-加载频道数据"><a href="#综合案例-加载频道数据" class="header-anchor">#</a> 综合案例-加载频道数据</h2> <p>actionType.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANNEL_GET</span> <span class="token operator">=</span> <span class="token string">'channel/get'</span>

</code></pre></div><p>reducers/channel.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CHANNEL_GET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">channel</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">CHANNEL_GET</span><span class="token operator">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>payload

    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>actions/channel.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CHANNEL_GET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getChannel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://geek.itheima.net/v1_0/channels'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>channels<span class="token punctuation">)</span>

    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CHANNEL_GET</span><span class="token punctuation">,</span>
      <span class="token literal-property property">payload</span><span class="token operator">:</span> channels
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CHANNEL_GET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getChannel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://geek.itheima.net/v1_0/channels'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>channels<span class="token punctuation">)</span>

    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CHANNEL_GET</span><span class="token punctuation">,</span>
      <span class="token literal-property property">payload</span><span class="token operator">:</span> channels<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>channel.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch<span class="token punctuation">,</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getChannel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/actions/channel'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Channel</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>channel<span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;catagtory&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>channels<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="综合案例-处理频道高亮"><a href="#综合案例-处理频道高亮" class="header-anchor">#</a> 综合案例-处理频道高亮</h2> <p><img src="data:image/png;base64,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" alt="image-20211114215200121"></p> <p>actionType.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANNEL_GET</span> <span class="token operator">=</span> <span class="token string">'channel/get'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ACTIVE_CHANNEL</span> <span class="token operator">=</span> <span class="token string">'active_channel'</span>

</code></pre></div><p>reducers/channel.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CHANNEL_GET</span><span class="token punctuation">,</span> <span class="token constant">ACTIVE_CHANNEL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">channel</span> <span class="token punctuation">(</span>
  <span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">channels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">activeId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  action</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">CHANNEL_GET</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">channels</span><span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token constant">ACTIVE_CHANNEL</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">activeId</span><span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>actions/channel.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CHANNEL_GET</span><span class="token punctuation">,</span> <span class="token constant">ACTIVE_CHANNEL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setActiveChannel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">ACTIVE_CHANNEL</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> id
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>channel.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch<span class="token punctuation">,</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getChannel<span class="token punctuation">,</span> setActiveChannel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/actions/channel'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Channel</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>channels<span class="token punctuation">)</span>
  <span class="token keyword">const</span> activeId <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>activeId<span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;catagtory&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>channels<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>li
          className<span class="token operator">=</span><span class="token punctuation">{</span>activeId <span class="token operator">===</span> it<span class="token punctuation">.</span>id <span class="token operator">?</span> <span class="token string">'select'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
          key<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">setActiveChannel</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="综合案例-获取文章列表"><a href="#综合案例-获取文章列表" class="header-anchor">#</a> 综合案例-获取文章列表</h2> <p>actionType.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANNEL_GET</span> <span class="token operator">=</span> <span class="token string">'channel/get'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ACTIVE_CHANNEL</span> <span class="token operator">=</span> <span class="token string">'active_channel'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">NEWS_GET</span> <span class="token operator">=</span> <span class="token string">'news/get'</span>

</code></pre></div><p>actions/articles.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">NEWS_GET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getNews</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">channelId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://geek.itheima.net/v1_0/articles?channel_id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>channelId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;timestamp=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>

    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">NEWS_GET</span><span class="token punctuation">,</span>
      <span class="token literal-property property">payload</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>reducers/news.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">NEWS_GET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../actionType'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">news</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">NEWS_GET</span><span class="token operator">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>payload

    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>newsList.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'../back.jpg'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useSelector<span class="token punctuation">,</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getNews <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/actions/articles'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">NewsList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> channelId <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>activeId<span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getNews</span><span class="token punctuation">(</span>channelId<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>channelId<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;list&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;article_item&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token string">&quot;van-ellipsis&quot;</span><span class="token operator">&gt;</span>python数据预处理 ：数据标准化<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;img_box&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>avatar<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;w100&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;info_box&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token number">13552285417</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token number">0</span>评论<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token number">2018</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span>29T17<span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="综合案例-渲染文章列表"><a href="#综合案例-渲染文章列表" class="header-anchor">#</a> 综合案例-渲染文章列表</h2> <p>用useSelector获取数据</p> <p>列表渲染</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'../back.jpg'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useSelector<span class="token punctuation">,</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getNews <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/actions/articles'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">NewsList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> channelId <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>activeId<span class="token punctuation">)</span>
<span class="token operator">+</span> <span class="token keyword">const</span> news <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>news<span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getNews</span><span class="token punctuation">(</span>channelId<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>channelId<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;list&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>news<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>art_id<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;article_item&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token string">&quot;van-ellipsis&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;img_box&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>cover<span class="token punctuation">.</span>type <span class="token operator">?</span> it<span class="token punctuation">.</span>cover<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> avatar<span class="token punctuation">}</span>
              className<span class="token operator">=</span><span class="token string">&quot;w100&quot;</span>
              alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;info_box&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>aut_name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>comm_count<span class="token punctuation">}</span>评论<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>it<span class="token punctuation">.</span>pubdate<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="拓展-redux-thunk-中间件原理"><a href="#拓展-redux-thunk-中间件原理" class="header-anchor">#</a> 拓展-redux-thunk-中间件原理</h2> <p>redux-thunk的<a href="https://github.com/reduxjs/redux-thunk/blob/master/src/index.js" target="_blank" rel="noopener noreferrer">源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>非常简单</p> <p>注意下面的<code>typeof action === 'function'</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createThunkMiddleware</span><span class="token punctuation">(</span><span class="token parameter">extraArgument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Redux 中间件的写法：const myMiddleware = store =&gt; next =&gt; action =&gt; { /* 此处写 中间件 的代码 */ }</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> getState <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// redux-thunk 的核心代码：</span>
    <span class="token comment">// 判断 action 的类型是不是函数</span>
    <span class="token comment">// 如果是函数，就调用该函数（action），并且传入了 dispatch 和 getState</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> action <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">action</span><span class="token punctuation">(</span>dispatch<span class="token punctuation">,</span> getState<span class="token punctuation">,</span> extraArgument<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 如果不是函数，就调用下一个中间件（next），将 action 传递过去</span>
    <span class="token comment">// 如果没有其他中间件，那么，此处的 next 指的就是：Redux 自己的 dispatch 方法</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jiely/chapter1/07-redux基础.html" class="prev">
        Redux基本介绍
      </a></span> <span class="next"><a href="/jiely/chapter1/09-react路由.html">
        react路由
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/jiely/assets/js/app.87156db4.js" defer></script><script src="/jiely/assets/js/3.05e47443.js" defer></script><script src="/jiely/assets/js/11.7487ab28.js" defer></script>
  </body>
</html>
